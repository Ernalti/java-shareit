CREATE TABLE IF NOT EXISTS users (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
    name VARCHAR,
    email VARCHAR,
    CONSTRAINT email UNIQUE (email)


);
CREATE TABLE IF NOT EXISTS items (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
    name VARCHAR,
    description VARCHAR,
    available BOOLEAN,
    owner INTEGER NOT NULL REFERENCES users (id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS booking (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
    start_booking DATETIME,
    end_booking DATETIME,
    item INTEGER NOT NULL REFERENCES items (id) ON DELETE CASCADE,
    booker INTEGER NOT NULL REFERENCES users (id) ON DELETE CASCADE,
    status VARCHAR NOT NULL
);

CREATE TABLE IF NOT EXISTS comments (
    id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
    text VARCHAR NOT NULL,
    item BIGINT NOT NULL REFERENCES items (id) ON DELETE CASCADE,
    author BIGINT NOT NULL REFERENCES users (id) ON DELETE CASCADE,
    created DATETIME NOT NULL
);